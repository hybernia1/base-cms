{% extends 'admin/layout.twig' %}

{% set current_menu = 'comments' %}
{% import 'admin/partials/components.twig' as ui %}
{% block title %}Komentáře | Administrace{% endblock %}

{% block body %}
    {% set header_actions = [] %}
    {% if status == 'trash' %}
        {% set header_actions = header_actions|merge([{
            type: 'button',
            button_type: 'submit',
            label: 'Vysypat koš',
            variant: 'danger',
            icon: 'bi-trash',
            attributes: {
                form: 'emptyCommentsTrash',
                'data-confirm': 'Chcete nenávratně smazat všechny komentáře v koši?',
                'data-confirm-title': 'Trvalé smazání'
            }
        }]) %}
    {% endif %}

    {{ ui.page_header('Komentáře', header_actions) }}

    {% if status == 'trash' %}
        <form id="emptyCommentsTrash" action="/admin/comments/trash/empty" method="post"></form>
    {% endif %}

    <div class="ajax-block" data-ajax-container data-endpoint="/admin/comments" data-current-url="{{ pagination.current_url }}">
        {% include 'admin/comments/_list.twig' with {
            comments: comments,
            status: status,
            counts: counts,
            content_map: content_map,
            parent_map: parent_map,
            child_counts: child_counts,
            pagination: pagination
        } only %}
    </div>
{% endblock %}

