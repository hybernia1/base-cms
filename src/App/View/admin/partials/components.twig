{% macro pagination(pagination) %}
    {% if pagination.pages > 1 %}
        <nav aria-label="Stránkování" class="mt-3">
            <ul class="pagination pagination-sm justify-content-center pagination-soft">
                <li class="page-item {% if not pagination.has_prev %}disabled{% endif %}">
                    <a class="page-link d-flex align-items-center gap-2" href="{{ pagination.prev_url ?: '#' }}" aria-label="Předchozí">
                        <i class="bi bi-chevron-left"></i>
                        <span class="d-none d-md-inline">Předchozí</span>
                    </a>
                </li>

                {% for page in pagination.page_numbers %}
                    <li class="page-item {% if page == pagination.page %}active{% endif %}">
                        <a class="page-link fw-semibold" href="{{ pagination.page_urls[page] ?? '#' }}">{{ page }}</a>
                    </li>
                {% endfor %}

                <li class="page-item {% if not pagination.has_next %}disabled{% endif %}">
                    <a class="page-link d-flex align-items-center gap-2" href="{{ pagination.next_url ?: '#' }}" aria-label="Další">
                        <span class="d-none d-md-inline">Další</span>
                        <i class="bi bi-chevron-right"></i>
                    </a>
                </li>
            </ul>
        </nav>
    {% endif %}
{% endmacro %}

{% macro button(kind, label = null, options = {}) %}
    {% set presets = {
        add: { class: 'btn btn-primary', icon: 'bi-plus-lg', default_label: 'Přidat' },
        upload: { class: 'btn btn-primary', icon: 'bi-cloud-arrow-up', default_label: 'Nahrát' },
        remove: { class: 'btn btn-outline-danger btn-sm', icon: 'bi-trash', default_label: 'Smazat' }
    } %}

    {% set preset = presets[kind] ?? presets.add %}
    {% set text = label ?: preset.default_label %}

    {% set baseAttrs = options.attrs ?? {} %}
    {% set mergedClass = (preset.class ~ ' ' ~ (options.class ?? '') ~ ' ' ~ (baseAttrs.class ?? ''))|trim %}
    {% set baseAttrs = baseAttrs|merge({ 'class': mergedClass }) %}

    {% if options.href is defined %}
        {% set tag = 'a' %}
        {% set baseAttrs = baseAttrs|merge({ 'href': options.href }) %}
    {% else %}
        {% set tag = 'button' %}
        {% set baseAttrs = baseAttrs|merge({ 'type': options.type|default('button') }) %}
    {% endif %}

    <{{ tag }}
        {% for name, value in baseAttrs %}
            {{ name }}="{{ value }}"
        {% endfor %}
    >
        {% if preset.icon %}<i class="bi {{ preset.icon }}"></i>{% endif %}
        <span class="ms-1">{{ text }}</span>
    </{{ tag }}>
{% endmacro %}

{% macro actions(actions, size = 'sm') %}
    <div class="btn-{{ size }}" role="group">
        {% for action in actions %}
            {% set tooltip = action.title ?: action.label %}

            {% if action.type == 'link' %}
                <a href="{{ action.href }}"
                   class="btn btn-outline-{{ action.variant|default('secondary') }} btn-icon"
                   title="{{ tooltip }}"
                   aria-label="{{ tooltip }}">
                    {% if action.icon %}<i class="bi {{ action.icon }}"></i>{% endif %}
                </a>

            {% elseif action.type == 'form' %}
                <form method="{{ action.method|default('post') }}"
                      action="{{ action.action }}"
                      class="d-inline"
                      {% if action.ajax %}data-ajax-delete="1"{% endif %}
                      {% if action.confirm %}data-confirm="{{ action.confirm }}"{% endif %}>

                    {% if action.hidden is defined %}
                        {% for name, value in action.hidden %}
                            <input type="hidden" name="{{ name }}" value="{{ value }}">
                        {% endfor %}
                    {% endif %}

                    <button type="submit"
                            class="btn btn-outline-{{ action.variant|default('secondary') }} btn-icon"
                            title="{{ tooltip }}"
                            aria-label="{{ tooltip }}">
                        {% if action.icon %}<i class="bi {{ action.icon }}"></i>{% endif %}
                    </button>
                </form>
            {% endif %}
        {% endfor %}
    </div>
{% endmacro %}
