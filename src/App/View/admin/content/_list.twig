{% import 'admin/partials/components.twig' as ui %}

<ul class="nav nav-pills mb-3">
    <li class="nav-item">
        <a class="nav-link {% if current_status == 'published' %}active{% endif %}"
           href="/admin/content/{{ current_type.slug }}?status=published"
           data-ajax-link>Publikované</a>
    </li>
    <li class="nav-item">
        <a class="nav-link {% if current_status == 'draft' %}active{% endif %}"
           href="/admin/content/{{ current_type.slug }}?status=draft"
           data-ajax-link>Koncepty</a>
    </li>
    <li class="nav-item">
        <a class="nav-link {% if current_status not in ['published','draft'] %}active{% endif %}"
           href="/admin/content/{{ current_type.slug }}"
           data-ajax-link>Vše</a>
    </li>
</ul>

{% if items is empty %}
    <div class="alert alert-info">
        {% if current_status == 'published' %}
            Zatím zde není žádný publikovaný obsah.
        {% elseif current_status == 'draft' %}
            Zatím zde nejsou žádné koncepty.
        {% else %}
            Zatím zde není žádný obsah.
        {% endif %}
    </div>
{% else %}
    <div class="table-responsive">
        <table class="table align-middle">
            <thead>
                <tr>
                    <th>Název</th>
                    <th>Typ</th>
                    <th>Stav</th>
                    <th>Slug</th>
                    <th>Upraveno</th>
                    <th class="text-end">Akce</th>
                </tr>
            </thead>
            <tbody>
                {% for item in items %}
                    <tr>
                        <td class="fw-semibold">{{ item.title }}</td>
                        <td>{{ types[item.type]|default(item.type) }}</td>
                        <td>
                            {% if item.status == 'published' %}
                                <span class="badge text-bg-success">Publikováno</span>
                            {% else %}
                                <span class="badge text-bg-secondary">Draft</span>
                            {% endif %}
                        </td>
                        <td><code>{{ item.slug }}</code></td>
                        <td>{{ item.updated_at|date(settings.date_format|default('j. n. Y H:i')) }}</td>
                        <td class="text-end">
                            {{ ui.actions([
                                {
                                    type: 'link',
                                    href: '/admin/content/' ~ current_type.slug ~ '/' ~ item.id ~ '/edit',
                                    label: 'Upravit',
                                    variant: 'primary',
                                    icon: 'bi-pencil'
                                },
                                {
                                    type: 'form',
                                    action: '/admin/content/' ~ current_type.slug ~ '/' ~ item.id ~ '/delete',
                                    label: 'Smazat',
                                    variant: 'danger',
                                    confirm: 'Opravdu smazat tento obsah?',
                                    icon: 'bi-trash',
                                    ajax: true,
                                    hidden: { redirect: pagination.current_url }
                                }
                            ]) }}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {{ ui.pagination(pagination) }}
{% endif %}